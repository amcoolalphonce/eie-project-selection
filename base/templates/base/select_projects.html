{% extends "base/base.html" %}
{% block title %}{% endblock %}
{% block content %}
<h1>Select up to 3 Projects</h1>
<form method="post">
    {% csrf_token %}
    <table>
        <thead>
            <tr>
                <th>Select</th>
                <th>Project Number</th>
                <th>Project Title</th>
            </tr>
        </thead>
        <tbody>
            {% for project in projects %}
            <tr>
                <td>
                    <input type="checkbox" name="projects" value="{{ project.id }}"
                        {% if project.id in selected_project_ids %}checked disabled{% endif %}
                        {% if selected_project_ids|length >= 3 and project.id not in selected_project_ids %}disabled{% endif %}
                    >
                </td>
                <td>{{ project.prj_number }}</td>
                <td>{{ project.prj_title }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <button type="submit">Save Selections</button>
</form>

<h2>Your Selected Projects</h2>
<ul>
    {% for sel in selected_projects %}
        <li>{{ sel.project.prj_number }}: {{ sel.project.prj_title }} (selected at {{ sel.timestamp }})</li>
    {% empty %}
        <li>You have not selected any projects yet.</li>
    {% endfor %}
</ul>
{% endblock %}